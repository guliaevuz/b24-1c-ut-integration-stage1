# Test Scenarios — Этап 1 (v1GPT)

Документ содержит пошаговые сценарии ручного тестирования интеграции  
**Битрикс24 ↔ 1С:Управление торговлей** (Этап 1).

Версия документа: **v1GPT**

---

## Общие условия тестирования

### Предварительные требования
- В Битрикс24 существует стадия сделки  
  **«Запустить БП в 1С УТ»**
- В Битрикс24 создано пользовательское поле сделки  
  **«Сделка 1С УТ»**
- В 1С УТ:
  - настроен объект «Сделка с клиентом»
  - существует бизнес-процесс, запускаемый при создании сделки
- Внешняя обработка интеграции подключена и доступна пользователю
- Настроен входящий вебхук Битрикс24

---

## Сценарий 1. Получение списка сделок из Битрикс24

**Цель:** проверить корректность отбора сделок.

### Шаги
1. В Битрикс24 создать тестовую сделку.
2. Установить стадию сделки:  
   **«Запустить БП в 1С УТ»**
3. Убедиться, что поле **«Сделка 1С УТ»** пустое.
4. В 1С УТ открыть внешнюю обработку интеграции.
5. Запустить получение списка сделок.

### Ожидаемый результат
- Сделка отображается в списке обработки.
- Отображается корректный ID и название сделки.

---

## Сценарий 2. Фильтрация уже обработанных сделок

**Цель:** проверить защиту от повторной обработки.

### Шаги
1. В Битрикс24 взять сделку с заполненным полем **«Сделка 1С УТ»**.
2. Установить стадию сделки:  
   **«Запустить БП в 1С УТ»**
3. Запустить внешнюю обработку в 1С.

### Ожидаемый результат
- Сделка **не отображается** в основном списке обработки.
- Повторное создание сделки в 1С невозможно.

---

## Сценарий 3. Создание сделки в 1С УТ

**Цель:** проверить создание объекта и заполнение полей.

### Шаги
1. В списке обработки выбрать сделку из Битрикс24.
2. Нажать кнопку **«Создать сделку в 1С»**.
3. Дождаться завершения обработки.

### Ожидаемый результат
- В 1С создан объект **«Сделка с клиентом»**.
- Поля заполнены корректно:
  - Тема = название сделки Б24
  - Клиент = «Виртуальный Партнер»
  - Организация = «ИННТЕРИ»
  - Подразделение = «UV-print»
  - Автор = ответственный в Б24
  - ID Битрикс = ID сделки Б24

---

## Сценарий 4. Запуск бизнес-процесса 1С

**Цель:** проверить автоматический запуск БП.

### Шаги
1. После создания сделки открыть карточку сделки в 1С.
2. Проверить активные бизнес-процессы.

### Ожидаемый результат
- Связанный бизнес-процесс **запущен автоматически**.
- БП привязан к созданной сделке.

---

## Сценарий 5. Обратная запись номера сделки в Битрикс24

**Цель:** проверить синхронизацию 1С → Б24.

### Шаги
1. Открыть созданную сделку в 1С.
2. Скопировать номер сделки.
3. Открыть исходную сделку в Битрикс24.

### Ожидаемый результат
- Поле **«Сделка 1С УТ»** заполнено номером сделки 1С.
- В названии сделки в Б24 номер сделки добавлен в начало.
- Формат:
